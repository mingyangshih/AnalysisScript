const iabCore = require("@iabtechlabtcf/core");
let BIDDERS_MAP = {
  10: "IX",
  24: "conversant",
  28: "triplelift",
  32: "Appnexus",
  52: "Rubicon",
  58: "33across",
  69: "OpenX",
  76: "pubmatic",
};
let BIDDERS = {};
let TCF_PROPERTY = ["vendorConsents", "vendorLegitimateInterests"];
let iwin_decode_consent_string = iabCore.TCString.decode(
  "CP8FKAAP8FKAAAKA0AENAtEsAP_gAEPgACiQg1NX_H__bW9r8X73aft0eY1P99j77sQxBhfJE-4FzLvW_JwXx2ExNA36tqIKmRIEu3bBIQNlHJDUTVigaogVryDMakWcgTNKJ6BkiFMRM2dYCF5vmwtj-QKY5vp993dx2D-t_dv83dzyz4VHn3a5_2e0eJCdA58tDfv9bROb-9IPd_58v4v0_F_rE2_eT1l_tevp7B8-ft87_XW-9_fff79LAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQagCzDQqIA-yJCQi0DCKBACoKwgIoEAAAAJA0QEAJgwKdgYBLrCRACAFAAMEAIAAUZAAgAAEgAQiACQAoEAAEAgUAAIAAAgEADAwABgAtBAIAAQHQIUwIIFAsAEjMiIUwIQoEggJbKBBIAgQVwhCLPAggERMFAAACQAVgACAsFgMSSAlYkECXEG0AABAAgEEIFQik6MAQwJmy1V4om0ZWkBaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAACAA.YAAAAAAAAAAA"
);
let Yolla_decode_consent_string = iabCore.TCString.decode(
  "CP8FKAAP8FKAAAKA0AENAtEsAP_gAEPgACiQg1QiwAFAANgAwADMAHAAdABAACQAFoANAAbgA6AB6AEUAJEASwBMACiAFcAMwAnABRgDEAGUAOIAdAA7QCeAFGAMGAY0AzIBrgDfgHEAOMAdkA9sB8AHxAQOAhABCwCRQEngKZAU-AqEBUoCqwFmgLWAW2AvMBkwDYAG1gNyAbqA3sBvwDgIHCAcOA4sBxwDk4HLAcwA5qB0IHRwOmA6oB1sDrwOwAdlA7cDuIHdAd_A8EDyAHlQPMA82B54HoAPSAetA9kD24HvAe_A-ED54H0gfYA-4B-MD9wP6gf4B_0EAAQJggYCCAEE4IKgg2BB-CEIITAQoghWCGAENIIbAh6BD-CIIIhARGgiSCJUETARNgieCKkEVgRZAi5BF8EYgIyQRmBGcCNUEbARzgjqCOwEeII9Aj6BH-CQIJCgSHgkUCRsEjwSQgksCTUEnQShglICVMEqwSsglcCWUEtQS3glyCYAEwoJiAmMBMiCZQJlwTNBNGCaYJrQTYBN6CcAJyQTmBOgCdUE7ATzgnqCfQE_AJ_wUBBQIINQg1QagAFAAcABAACQAGgAOAAmABmAE4AKMAZQA6ACaAHEAPaAhABHgCRQFPgKhAVKAvMBkwDVQG5AN1AcEA4sBx4Dk4HLAcuA50Bz4DtgHcgPFAePA8kDygHtAPigfIB8oD64H2gfdA_YD9wH9gP-AgCBAQCBgEDwIIwQTBBQCDAEGwIQgQoAhXBC0ELwIZwQ5BDqCHgIegQ_AimBGACNIEbwI6AR7Aj6BH8CQgEiAJFASNgkgCSQElIJMAkyBKOCVAJUgSwglmCWkEtwS4gl0CXYEvoJgAmCBMMCYoExwJkwTLBM4CaQE1AJsQTbBNyCbwJvgThgnKCcwE64J2gncBPACeYE-4J-gn8BQAIKAQagAAAA.YAAAAAAAAAAA"
);

Object.keys(BIDDERS_MAP).forEach((i) => {
  if (iwin_decode_consent_string["vendorConsents"].set_.has(+i)) {
    BIDDERS[BIDDERS_MAP[i]] = iwin_decode_consent_string[
      "vendorConsents"
    ].set_.has(+i);
  }
});
console.log(BIDDERS);
let checkVendorLegitimateInterests = new Set(
  [...Yolla_decode_consent_string["vendorLegitimateInterests"].set_].filter(
    (i) => {
      return !iwin_decode_consent_string["vendorLegitimateInterests"].set_.has(
        i
      );
    }
  )
);
console.log(checkVendorLegitimateInterests);
